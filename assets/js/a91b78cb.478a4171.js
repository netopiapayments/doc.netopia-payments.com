"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[1286],{4538:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"payment-api/v2.x/authorize/authorize-response","title":"Authorize Response","description":"Once the 3DS authentication is completed, the bank (ACS) redirects the user to your backUrl with:","source":"@site/docs/payment-api/v2.x/authorize/authorize-response.md","sourceDirName":"payment-api/v2.x/authorize","slug":"/payment-api/v2.x/authorize/authorize-response","permalink":"/docs/payment-api/v2.x/authorize/authorize-response","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"authorize-response","title":"Authorize Response","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Sample Request","permalink":"/docs/payment-api/v2.x/authorize/authorize-sample"},"next":{"title":"Verify a Payment","permalink":"/docs/payment-api/v2.x/verify-auth/verify-payment"}}');var r=t(4848),i=t(8453);const o={id:"authorize-response",title:"Authorize Response",sidebar_position:4},d="Authorize Response",l={},a=[{value:"Final Step: Verify Auth",id:"final-step-verify-auth",level:2},{value:"<strong>Required Parameters:</strong>",id:"required-parameters",level:3},{value:"<strong>Why is this step mandatory?</strong>",id:"why-is-this-step-mandatory",level:3},{value:"Handling Different <code>paRes</code> Outcomes",id:"handling-different-pares-outcomes",level:2},{value:"<strong>Handling <code>backUrl</code> Correctly</strong>",id:"handling-backurl-correctly",level:2},{value:"<strong>Next Steps in the Flow</strong>",id:"next-steps-in-the-flow",level:2}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"authorize-response",children:"Authorize Response"})}),"\n",(0,r.jsxs)(n.p,{children:["Once the ",(0,r.jsx)(n.strong,{children:"3DS"})," authentication is completed, the bank (ACS) redirects the user to your ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"backUrl"})})," with:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"paRes"})}),": A token indicating the outcome of 3DS authentication."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"At this point:",type:"info",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["You have the initial ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"authenticationToken"})})," (from the ",(0,r.jsx)(n.strong,{children:"Start"})," response)."]}),"\n",(0,r.jsxs)(n.li,{children:["You have the new ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"paRes"})})," (sent to ",(0,r.jsx)(n.code,{children:"backUrl"}),")."]}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"final-step-verify-auth",children:"Final Step: Verify Auth"}),"\n",(0,r.jsx)(n.p,{children:"To complete the payment, call:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"POST /payment/card/verify-auth\n"})}),"\n",(0,r.jsx)(n.h3,{id:"required-parameters",children:(0,r.jsx)(n.strong,{children:"Required Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"authenticationToken"})," (received in ",(0,r.jsx)(n.strong,{children:"Start"})," response)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ntpID"})," (NETOPIA transaction ID from ",(0,r.jsx)(n.strong,{children:"Start"})," response)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"formData"})," (all data from ",(0,r.jsx)(n.code,{children:"backUrl"}),", including ",(0,r.jsx)(n.code,{children:"paRes"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"why-is-this-step-mandatory",children:(0,r.jsx)(n.strong,{children:"Why is this step mandatory?"})}),"\n",(0,r.jsxs)(n.p,{children:["Calling ",(0,r.jsx)(n.strong,{children:"Verify Auth"})," ensures NETOPIA completes the transaction using the 3DS result."]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.mdxAdmonitionTitle,{children:(0,r.jsx)(n.strong,{children:"If you skip this step, the payment remains incomplete!"})})}),"\n",(0,r.jsxs)(n.h2,{id:"handling-different-pares-outcomes",children:["Handling Different ",(0,r.jsx)(n.code,{children:"paRes"})," Outcomes"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Scenario"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"paRes Indicator"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"What to Do"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Authentication Successful"}),(0,r.jsxs)(n.td,{children:["Valid ",(0,r.jsx)(n.code,{children:"paRes"})]}),(0,r.jsxs)(n.td,{children:["Call ",(0,r.jsx)(n.code,{children:"/payment/card/verify-auth"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Authentication Failed"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"paRes"})," with error"]}),(0,r.jsx)(n.td,{children:"Inform user & retry"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"User Canceled"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"paRes"})," missing"]}),(0,r.jsxs)(n.td,{children:["Treat as ",(0,r.jsx)(n.strong,{children:"canceled"})]})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"handling-backurl-correctly",children:(0,r.jsxs)(n.strong,{children:["Handling ",(0,r.jsx)(n.code,{children:"backUrl"})," Correctly"]})}),"\n",(0,r.jsxs)(n.p,{children:["Your ",(0,r.jsx)(n.code,{children:"backUrl"})," should be a ",(0,r.jsx)(n.strong,{children:"secure endpoint"})," that:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Receives ",(0,r.jsx)(n.code,{children:"paRes"})]})," and extracts it."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Handles errors gracefully"}),", such as authentication failures or user cancellations."]}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsx)(n.mdxAdmonitionTitle,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),(0,r.jsxs)(n.p,{children:["If ",(0,r.jsx)(n.code,{children:"paRes"})," contains an error, display a message to the user instead of proceeding with verification."]})]}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.mdxAdmonitionTitle,{}),(0,r.jsxs)(n.p,{children:["If the bank denies the authentication, or the user cancels, ",(0,r.jsx)(n.code,{children:"paRes"})," may indicate a failed status.",(0,r.jsx)(n.br,{}),"\n","Your ",(0,r.jsx)(n.code,{children:"backUrl"})," ",(0,r.jsx)(n.strong,{children:"must handle"})," these cases to prevent incorrect processing."]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"next-steps-in-the-flow",children:(0,r.jsx)(n.strong,{children:"Next Steps in the Flow"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"../start/quick-start",children:"Return to Start"})})," \u2192 Understand the initial request flow."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/payment-api/v2.x/start/Resources/errors-statuses",children:"Check Error Codes"})})," \u2192 Interpret authentication failures."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsxs)(n.a,{href:"../verify-auth/verify-payment",children:["Implement ",(0,r.jsx)(n.code,{children:"verify-auth"})]})})," \u2192 Finalize the payment with the 3DS authentication result."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var s=t(6540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);