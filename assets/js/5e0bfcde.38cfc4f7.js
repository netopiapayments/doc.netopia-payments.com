"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[8235],{9745:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"payment-sdks/go","title":"Go SDK","description":"Overview","source":"@site/docs/payment-sdks/go.md","sourceDirName":"payment-sdks","slug":"/payment-sdks/go","permalink":"/docs/payment-sdks/go","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Go SDK"},"sidebar":"docsSidebar","previous":{"title":"NodeJS SDK","permalink":"/docs/payment-sdks/nodejs"},"next":{"title":"Python SDK","permalink":"/docs/payment-sdks/python"}}');var s=n(4848),r=n(8453);const l={sidebar_position:3,title:"Go SDK"},d=void 0,a={},o=[{value:"Overview",id:"overview",level:2},{value:"Dependencies",id:"dependencies",level:3},{value:"Features",id:"features",level:3},{value:"Installation",id:"installation",level:2},{value:"Install the SDK",id:"install-the-sdk",level:3},{value:"Initialization",id:"initialization",level:3},{value:"Configuration",id:"configuration",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"StartPayment",id:"startpayment",level:3},{value:"GetStatus",id:"getstatus",level:3},{value:"VerifyAuth",id:"verifyauth",level:3},{value:"IPN Verification",id:"ipn-verification",level:3},{value:"Running tests",id:"running-tests",level:2},{value:"Error handling",id:"error-handling",level:2}];function c(t){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(e.p,{children:"The NETOPIA Payments Go SDK provides seamless integration with the Netopia Payments API v2. It allows developers to handle payments, IPN verification, and status retrieval efficiently within their Go applications."}),"\n",(0,s.jsx)(e.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://github.com/golang-jwt/jwt",children:"https://github.com/golang-jwt/jwt"})," (latest version: v5)"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Start a payment with customer details, products, and billing/shipping data."}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Retrieve the status of an order."}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Verify 3D Secure authentications."}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Validate IPNs (Instant Payment Notifications) for order updates."}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Compatible with both Sandbox and Live environments."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(e.h3,{id:"install-the-sdk",children:"Install the SDK"}),"\n",(0,s.jsxs)(e.p,{children:["To install the SDK, use ",(0,s.jsx)(e.code,{children:"go get"})," to include it in your project:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"go get github.com/netopiapayments/go-sdk\n"})}),"\n",(0,s.jsx)(e.h3,{id:"initialization",children:"Initialization"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-go",children:'import "github.com/netopiapayments/go-sdk"\n\ncfg := netopia.Config {\n\tPosSignature: "XXXX-XXXX-XXXX-XXXX",\n\tApiKey: "your-api-key",\n\tIsLive: false, // True = production | False = sandbox\n\tNotifyURL: "https://yourdomain.com/ipn",\n\tRedirectURL: "https://yourdomain.com/redirect",\n\tPublicKey: []byte("-----PUBLIC KEY-----"),\n\tActiveKey: "your-active-key",\n\tPosSignatureSet: []string{"XXXX-XXXX-XXXX-XXXX"},\n\tHashMethod: "sha512", // Default hash method\n}\n\nclient, err := netopia.NewPaymentClient(cfg)\n\nif  err != nil {\n\tpanic(err)\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{style:{textAlign:"left"},children:"Field"}),(0,s.jsx)(e.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(e.th,{style:{textAlign:"left"},children:"Required"}),(0,s.jsx)(e.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:(0,s.jsx)(e.strong,{children:"PosSignature"})}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"POS Signature for your NETOPIA account"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:(0,s.jsx)(e.strong,{children:"ApiKey"})}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"API key generated in NETOPIA's admin panel"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:(0,s.jsx)(e.strong,{children:"IsLive"})}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"bool"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"No"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"Whether to use the live environment (true) or sandbox (false)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:(0,s.jsx)(e.strong,{children:"NotifyURL"})}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"The URL where IPNs (order updates) will be sent"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:(0,s.jsx)(e.strong,{children:"RedirectURL"})}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"The URL to redirect the customer after payment"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:(0,s.jsx)(e.strong,{children:"PublicKey"})}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"[]byte"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"RSA public key provided by NETOPIA for signature verification"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:(0,s.jsx)(e.strong,{children:"ActiveKey"})}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"Active key for your merchant account"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:(0,s.jsx)(e.strong,{children:"PosSignatureSet"})}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"[]string"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"List of allowed POS Signatures"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:(0,s.jsx)(e.strong,{children:"HashMethod"})}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"No"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"Hash method for IPN validation (default: sha512)"})]})]})]}),"\n",(0,s.jsx)(e.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsx)(e.h3,{id:"startpayment",children:"StartPayment"}),"\n",(0,s.jsx)(e.p,{children:"Initiates a payment transaction."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-go",children:'\nstartReq := &requests.StartPaymentRequest{\n\t\tConfig: &requests.ConfigData{\n\t\tNotifyURL: cfg.NotifyURL,\n\t\tRedirectURL: cfg.RedirectURL,\n\t\tLanguage: "ro", // ro is the default language if not provided\n\t},\n\tPayment: &requests.PaymentData{\n\t\tOptions: requests.PaymentOptions{\n\t\t\tInstallments: 1,\n\t\t\tBonus: 0,\n\t\t},\n\t\tInstrument: requests.PaymentInstrument{\n\t\t\tType: "card",\n\t\t\tAccount: "9900009184214768",\n\t\t\tExpMonth: 11,\n\t\t\tExpYear: 2025,\n\t\t\tSecretCode: "111",\n\t\t},\n\t},\n\tOrder: &requests.OrderData{\n\t\tOrderID: "R973i8Stza46n0me152oidgnr_492",\n\t\tAmount: 0,\n\t\tCurrency: "RON",\n\t\tDescription: "Sample order",\n\t\tBilling: requests.BillingShipping{\n\t\t\tEmail: "client@example.com",\n\t\t\tPhone: "123456789",\n\t\t\tFirstName: "John",\n\t\t\tLastName: "Doe",\n\t\t\tCity: "Bucharest",\n\t\t\tCountry: 642,\n\t\t},\n\tProducts: []requests.Product{\n\t\t\t{Name: "T-shirt Alfa", Code: "D276C05398EO14", Price: 17, Vat: 19},\n\t\t},\n\t},\n}\n\nstartResp, err := client.StartPayment(startReq)\n\nif  err != nil {\n\tfmt.Println("Error:", err)\n\treturn\n}\n\n// Get the response from the API\nfmt.Printf("Start payment response: %+v", startResp)\n'})}),"\n",(0,s.jsx)(e.h3,{id:"getstatus",children:"GetStatus"}),"\n",(0,s.jsx)(e.p,{children:"Retrieves the status of an order."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-go",children:'\nstatusResp, err := client.GetStatus("ntpID-123456", "orderID-12345")\n\nif  err != nil {\t\n\tfmt.Println("Error:", err)\n\treturn\n}\n\nfmt.Printf("Order status: %+v", statusResp)\n'})}),"\n",(0,s.jsx)(e.h3,{id:"verifyauth",children:"VerifyAuth"}),"\n",(0,s.jsx)(e.p,{children:"Handles 3D Secure verification for transactions."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-go",children:'\nverifyResp, err := client.VerifyAuth("authToken123", "ntpID-123456", "paResData")\n\nif  err != nil {\n\tfmt.Println("Error:", err)\n\treturn\n}\n\nfmt.Printf("VerifyAuth response: %+v", verifyResp)\n'})}),"\n",(0,s.jsx)(e.h3,{id:"ipn-verification",children:"IPN Verification"}),"\n",(0,s.jsx)(e.p,{children:"Validates the authenticity and integrity of IPNs (Instant Payment Notifications)."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-go",children:'\nfunc  ipnHandler(w  http.ResponseWriter, r *http.Request) {\n\tresult, err := client.VerifyIPN(r)\n\tif  err != nil {\n\t\thttp.Error(w, err.Error(), http.StatusBadRequest)\n\t\treturn\n\t}\n\n\tfmt.Printf("IPN Verification Result: %+v", result)\n\tw.WriteHeader(http.StatusOK)\n}\n\n'})}),"\n",(0,s.jsx)(e.h2,{id:"running-tests",children:"Running tests"}),"\n",(0,s.jsx)(e.p,{children:"To ensure the SDK functions as expected, comprehensive unit tests are provided. You can run unit tests suit using the following command:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"cd go-sdk\ngo test -v ./tests\n"})}),"\n",(0,s.jsx)(e.h2,{id:"error-handling",children:"Error handling"}),"\n",(0,s.jsx)(e.p,{children:"Handling errors:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-go",children:'\nif  err != nil {\n\tswitch  err {\n\t\tcase  netopia.ErrMissingAPIKey:\n\t\t\tfmt.Println("API Key is missing!")\n\t\tdefault:\n\t\t\tfmt.Println("An error occurred:", err)\n\t}\n}\n\n'})}),"\n",(0,s.jsx)(e.p,{children:"The SDK provides structured error handling with pre-defined error variables. Some common errors include:"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{style:{textAlign:"left"},children:"Error Name"}),(0,s.jsx)(e.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"ErrMissingAPIKey"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"API Key is not provided."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"ErrInvalidPublicKey"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"The provided public key is invalid."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"ErrInvalidIssuer"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:'JWT token issuer (iss) is not "NETOPIA Payments".'})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"ErrPayloadHashMismatch"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"Hash of the payload does not match sub in the JWT."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"ErrInvalidToken"}),(0,s.jsx)(e.td,{style:{textAlign:"left"},children:"The JWT token is invalid."})]})]})]})]})}function h(t={}){const{wrapper:e}={...(0,r.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(c,{...t})}):c(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>l,x:()=>d});var i=n(6540);const s={},r=i.createContext(s);function l(t){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function d(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:l(t.components),i.createElement(r.Provider,{value:e},t.children)}}}]);