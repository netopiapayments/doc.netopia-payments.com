"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[374],{3236:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"payment-sdks/python","title":"Python SDK","description":"Overview","source":"@site/docs/payment-sdks/python.md","sourceDirName":"payment-sdks","slug":"/payment-sdks/python","permalink":"/docs/payment-sdks/python","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Python SDK"},"sidebar":"docsSidebar","previous":{"title":"Go SDK","permalink":"/docs/payment-sdks/go"},"next":{"title":"Ruby SDK","permalink":"/docs/payment-sdks/ruby"}}');var s=n(4848),r=n(8453);const l={sidebar_position:4,title:"Python SDK"},a=void 0,d={},o=[{value:"Overview",id:"overview",level:2},{value:"Dependencies",id:"dependencies",level:3},{value:"Features",id:"features",level:3},{value:"Installation",id:"installation",level:2},{value:"Install the SDK",id:"install-the-sdk",level:3},{value:"Initialization",id:"initialization",level:3},{value:"Configuration",id:"configuration",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"StartPayment",id:"startpayment",level:3},{value:"GetStatus",id:"getstatus",level:3},{value:"VerifyAuth",id:"verifyauth",level:3},{value:"IPN Verification",id:"ipn-verification",level:3},{value:"Sample App",id:"sample-app",level:2},{value:"Running tests",id:"running-tests",level:2},{value:"Error handling",id:"error-handling",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(t.p,{children:"The NETOPIA Payments Python SDK provides seamless integration with the Netopia Payments API v2. It allows developers to handle payments, IPN verification, and status retrieval efficiently within their Go applications."}),"\n",(0,s.jsxs)(t.p,{children:["Github Repository: ",(0,s.jsx)(t.a,{href:"https://github.com/netopiapayments/python-sdk",children:"https://github.com/netopiapayments/python-sdk"})]}),"\n",(0,s.jsx)(t.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://github.com/jpadilla/pyjwt",children:"https://github.com/jpadilla/pyjwt"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://github.com/psf/requests",children:"https://github.com/psf/requests"})}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Start a payment with customer details, products, and billing/shipping data."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Retrieve the status of an order."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Verify 3D Secure authentications."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Validate IPNs (Instant Payment Notifications) for order updates."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Compatible with both Sandbox and Live environments."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(t.h3,{id:"install-the-sdk",children:"Install the SDK"}),"\n",(0,s.jsx)(t.p,{children:"You can install the SDK from PyPI Test or PyPI, or by cloning this repository.:"}),"\n",(0,s.jsx)(t.p,{children:"Install the SDK from the PyPI Test repository (unstable, only for test purpose):"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"pip install -i https://test.pypi.org/simple/ netopia-sdk\n"})}),"\n",(0,s.jsx)(t.p,{children:"Install the SDK from the PyPI repository (recommended):"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"pip install netopia-sdk\n"})}),"\n",(0,s.jsx)(t.p,{children:"Alternatively, clone this repository and install the dependencies:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"git clone https://github.com/netopiapayments/python-sdk\npip install -r requirements.txt\n"})}),"\n",(0,s.jsx)(t.p,{children:"You can also add the SDK to your project by copying the netopia_sdk folder to your project directory."}),"\n",(0,s.jsx)(t.h3,{id:"initialization",children:"Initialization"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-go",children:'from netopia_sdk.config import Config\nfrom netopia_sdk.client import PaymentClient\nfrom netopia_sdk.payment import PaymentService\n\nconfig = Config(\n    api_key="your-api-key",\n    pos_signature="your-pos-signature",\n    is_live=False,  # True = production, False = sandbox\n    notify_url="https://yourdomain.com/ipn",\n    redirect_url="https://yourdomain.com/redirect",\n    public_key_str="-----BEGIN PUBLIC KEY-----....-----END PUBLIC KEY-----",\n    pos_signature_set=["your-pos-signature"],\n)\n\nclient = PaymentClient(config)\npayment_service = PaymentService(client)\n'})}),"\n",(0,s.jsx)(t.h3,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Field"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Required"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"api_key"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"API key generated in NETOPIA's admin panel"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"pos_signature"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"POS Signature for your NETOPIA account"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"is_live"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"bool"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"No"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Whether to use the live environment (true) or sandbox (false)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"notify_url"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The URL where IPNs (order updates) will be sent"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"redirect_url"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The URL to redirect the customer after payment"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"public_key_str"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"RSA public key provided by NETOPIA for signature verification"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"pos_signature_set"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"list"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"List of allowed POS Signatures"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsx)(t.h3,{id:"startpayment",children:"StartPayment"}),"\n",(0,s.jsx)(t.p,{children:"Initiates a payment transaction."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from netopia_sdk.requests.models import (\n    StartPaymentRequest, ConfigData, PaymentData, PaymentOptions, Instrument,\n    OrderData, BillingData, ProductsData,\n)\n\nstart_payment_request = StartPaymentRequest(\n    config=ConfigData(\n        emailTemplate="default",\n        emailSubject="Order Confirmation",\n        cancelUrl="https://yourdomain.com/cancel",\n        notifyUrl=config.notify_url,\n        redirectUrl=config.redirect_url,\n        language="ro",\n    ),\n    payment=PaymentData(\n        options=PaymentOptions(installments=1, bonus=0),\n        instrument=Instrument(\n            type="card",\n            account="4111111111111111",\n            expMonth=12,\n            expYear=2025,\n            secretCode="123",\n        ),\n    ),\n    order=OrderData(\n        orderID="R12345",\n        amount=100.0,\n        currency="RON",\n        description="Test Order",\n        billing=BillingData(\n            email="customer@example.com",\n            phone="1234567890",\n            firstName="John",\n            lastName="Doe",\n            city="Bucharest",\n            country=642,\n        ),\n        products=[\n            ProductsData(name="Product1", code="P001", category="Category1", price=100.0, vat=0),\n        ],\n    ),\n)\n\nresponse = payment_service.start_payment(start_payment_request)\nprint("Start Payment Response:", response)\n'})}),"\n",(0,s.jsx)(t.h3,{id:"getstatus",children:"GetStatus"}),"\n",(0,s.jsx)(t.p,{children:"Retrieves the status of an order."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'response = payment_service.get_status(ntpID="ntpID-123456", orderID="orderID-12345")\nprint("Order Status Response:", response)\n'})}),"\n",(0,s.jsx)(t.h3,{id:"verifyauth",children:"VerifyAuth"}),"\n",(0,s.jsx)(t.p,{children:"Handles 3D Secure verification for transactions."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'response = payment_service.verify_auth(\n    authenticationToken="authToken123",\n    ntpID="ntpID-123456",\n    formData={"paRes": "paResData"},\n)\nprint("VerifyAuth Response:", response)\n'})}),"\n",(0,s.jsx)(t.h3,{id:"ipn-verification",children:"IPN Verification"}),"\n",(0,s.jsx)(t.p,{children:"Validates the authenticity and integrity of IPNs (Instant Payment Notifications)."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from flask import Flask, request, jsonify\n\napp = Flask(__name__)\n\n@app.route("/ipn", methods=["POST"])\ndef ipn_handler():\n    try:\n        result = payment_service.verify_ipn(request.data)\n        return jsonify({"message": "IPN verified", "data": result}), 200\n    except Exception as e:\n        return jsonify({"error": str(e)}), 400\n'})}),"\n",(0,s.jsx)(t.h2,{id:"sample-app",children:"Sample App"}),"\n",(0,s.jsxs)(t.p,{children:["You can check out our Go Sample App which contains the backend and Postman Collections by going to its ",(0,s.jsx)(t.a,{href:"https://github.com/netopiapayments/sample-app-go",children:"Github repository here"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"running-tests",children:"Running tests"}),"\n",(0,s.jsx)(t.p,{children:"To ensure the SDK functions as expected, comprehensive unit tests are provided. You can run unit tests suit using the following command:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"cd go-sdk\ngo test -v ./tests\n"})}),"\n",(0,s.jsx)(t.h2,{id:"error-handling",children:"Error handling"}),"\n",(0,s.jsx)(t.p,{children:"Handling errors:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'try:\n    response = payment_service.get_status(ntpID="ntpID-123456", orderID="orderID-12345")\nexcept MissingAPIKeyError:\n    print("API Key is missing!")\nexcept Exception as e:\n    print("An error occurred:", str(e))\n'})}),"\n",(0,s.jsx)(t.p,{children:"The SDK provides structured error handling with pre-defined error variables. Some common errors include:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Error Name"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"MissingAPIKeyError"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"API Key is not provided."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"InvalidPublicKeyError"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The provided public key is invalid."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"InvalidIssuerError"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'JWT token issuer (iss) is not "NETOPIA Payments".'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"PayloadHashMismatchError"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Hash of the payload does not match sub in the JWT."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"InvalidTokenError"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The JWT token is invalid."})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>a});var i=n(6540);const s={},r=i.createContext(s);function l(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);