"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[1826],{433:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>l,frontMatter:()=>o,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"payment-api/v2.x/authorize/authorize-intro","title":"Authorize a Payment","description":"This Authorize endpoint applies only to payments that require 3-D Secure (3DS). In most cases, you\'ll invoke it after receiving a 3DS indicator from the Start endpoint (customerAction.type = \\"Authentication3D\\").","source":"@site/docs/payment-api/v2.x/authorize/introduction.md","sourceDirName":"payment-api/v2.x/authorize","slug":"/payment-api/v2.x/authorize/authorize-intro","permalink":"/docs/payment-api/v2.x/authorize/authorize-intro","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"authorize-intro","title":"Authorize a Payment","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Errors & Statuses","permalink":"/docs/payment-api/v2.x/start/Resources/errors-statuses"},"next":{"title":"Query Parameters","permalink":"/docs/payment-api/v2.x/authorize/authorize-query"}}');var s=t(4848),i=t(8453);const o={id:"authorize-intro",title:"Authorize a Payment",sidebar_position:1},d="Authorize a Payment",c={},h=[{value:"How Does 3DS Authorization Work?",id:"how-does-3ds-authorization-work",level:2},{value:"Why Is Authorization Needed?",id:"why-is-authorization-needed",level:2},{value:"When Do I Need to Authorize?",id:"when-do-i-need-to-authorize",level:2},{value:"Endpoints Overview",id:"endpoints-overview",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"authorize-a-payment",children:"Authorize a Payment"})}),"\n",(0,s.jsxs)(n.p,{children:["This ",(0,s.jsx)(n.strong,{children:"Authorize"})," endpoint applies ",(0,s.jsx)(n.strong,{children:"only"})," to payments that require ",(0,s.jsx)(n.strong,{children:"3-D Secure (3DS)"}),". In most cases, you'll invoke it ",(0,s.jsx)(n.strong,{children:"after"})," receiving a 3DS indicator from the ",(0,s.jsx)(n.strong,{children:"Start"})," endpoint (",(0,s.jsx)(n.code,{children:'customerAction.type = "Authentication3D"'}),")."]}),"\n",(0,s.jsx)(n.h2,{id:"how-does-3ds-authorization-work",children:"How Does 3DS Authorization Work?"}),"\n",(0,s.jsxs)(n.p,{children:["Whenever a ",(0,s.jsx)(n.strong,{children:"3DS"})," transaction is triggered:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.strong,{children:"Start"})," response contains ",(0,s.jsx)(n.code,{children:"error.code = 100"})," (indicating 3DS authentication is required)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"payment.status = 15"}),", meaning authentication is necessary."]}),"\n",(0,s.jsxs)(n.li,{children:["A ",(0,s.jsx)(n.strong,{children:"customerAction.url"})," is provided (the URL where the user must authenticate)."]}),"\n",(0,s.jsxs)(n.li,{children:["A unique ",(0,s.jsx)(n.strong,{children:"authenticationToken"})," is issued."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This flow ensures that the cardholder\u2019s bank (ACS \u2013 Access Control Server) verifies the payer's identity before proceeding with the transaction."}),"\n",(0,s.jsx)(n.h2,{id:"why-is-authorization-needed",children:"Why Is Authorization Needed?"}),"\n",(0,s.jsxs)(n.p,{children:["For ",(0,s.jsx)(n.strong,{children:"3DS"})," transactions, the bank\u2019s ",(0,s.jsx)(n.strong,{children:"Access Control Server (ACS)"})," must authenticate the user before payment can continue. The authentication process involves:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Sending ",(0,s.jsx)(n.code,{children:"paReq"})," (Payment Authentication Request)"]})," to the bank via the provided ",(0,s.jsx)(n.code,{children:"customerAction.url"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["The bank verifies the request and returns ",(0,s.jsx)(n.code,{children:"paRes"})," (Payment Authentication Response) to your system via ",(0,s.jsx)(n.code,{children:"backUrl"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["You finalize the transaction by calling ",(0,s.jsx)(n.strong,{children:"NETOPIA's"})," ",(0,s.jsx)(n.code,{children:"/payment/card/verify-auth"})," endpoint."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Steps in the Authorization Process:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Step"}),(0,s.jsx)(n.th,{children:"Action"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Start Payment"})}),(0,s.jsxs)(n.td,{children:["Call ",(0,s.jsx)(n.code,{children:"/payment/card/start"})," and receive ",(0,s.jsx)(n.code,{children:"customerAction.type = Authentication3D"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Redirect to Bank"})}),(0,s.jsxs)(n.td,{children:["Send ",(0,s.jsx)(n.code,{children:"paReq"})," and ",(0,s.jsx)(n.code,{children:"backUrl"})," to ",(0,s.jsx)(n.code,{children:"customerAction.url"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsxs)(n.strong,{children:["Receive ",(0,s.jsx)(n.code,{children:"paRes"})]})}),(0,s.jsxs)(n.td,{children:["The bank redirects the user to ",(0,s.jsx)(n.code,{children:"backUrl"})," with ",(0,s.jsx)(n.code,{children:"paRes"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Verify with NETOPIA"})}),(0,s.jsxs)(n.td,{children:["Call ",(0,s.jsx)(n.code,{children:"/payment/card/verify-auth"})," to finalize payment."]})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"when-do-i-need-to-authorize",children:"When Do I Need to Authorize?"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Only if the Start response indicates 3DS (",(0,s.jsx)(n.code,{children:"payment.status = 15"}),")"]}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["If ",(0,s.jsx)(n.code,{children:"payment.status = 3"})," (paid) or ",(0,s.jsx)(n.code,{children:"payment.status = 5"})," (confirmed), ",(0,s.jsx)(n.strong,{children:"authorization is NOT required"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"endpoints-overview",children:"Endpoints Overview"}),"\n",(0,s.jsx)(n.p,{children:"You must send the authorization request to the appropriate environment:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Environment"}),(0,s.jsx)(n.th,{children:"URL"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Sandbox (Testing 3DS Flows)"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"https://secure.sandbox.netopia-payments.com/sandbox/authorize"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Production (Live Transactions)"})}),(0,s.jsxs)(n.td,{children:["The ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"customerAction.url"})})," provided in the Start response (typically a bank\u2019s 3DS server)."]})]})]})]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["Do ",(0,s.jsx)(n.strong,{children:"not"})," hardcode a production URL. Always use the ",(0,s.jsx)(n.code,{children:"customerAction.url"})," from the ",(0,s.jsx)(n.strong,{children:"Start"})," response."]})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(n.p,{children:"Follow these key guides to complete authorization:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./authorize-query",children:(0,s.jsx)(n.strong,{children:"Query Parameters"})}),(0,s.jsx)(n.br,{}),"\n","Learn about ",(0,s.jsx)(n.code,{children:"paReq"})," and ",(0,s.jsx)(n.code,{children:"backUrl"}),"\u2014both required for authentication."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./authorize-sample",children:(0,s.jsx)(n.strong,{children:"Sample Request"})}),(0,s.jsx)(n.br,{}),"\n","See how to send ",(0,s.jsx)(n.code,{children:"paReq"})," and ",(0,s.jsx)(n.code,{children:"backUrl"})," via ",(0,s.jsx)(n.strong,{children:"HTML form"}),", ",(0,s.jsx)(n.strong,{children:"cURL"}),", or ",(0,s.jsx)(n.strong,{children:"PHP"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./authorize-response",children:(0,s.jsx)(n.strong,{children:"Authorize Response"})}),(0,s.jsx)(n.br,{}),"\n","Understand how to process the bank\u2019s response and finalize payment."]}),"\n"]})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var r=t(6540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);