"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[7236],{7516:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>t,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"payment-api/v1.x","title":"Version 1.x","description":"Overview","source":"@site/docs/payment-api/v1.x.md","sourceDirName":"payment-api","slug":"/payment-api/v1.x","permalink":"/docs/payment-api/v1.x","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Version 1.x"},"sidebar":"docsSidebar","previous":{"title":"Sample Response","permalink":"/docs/payment-api/v2.x/verify-auth/sample-response"},"next":{"title":"Payment Plugins","permalink":"/docs/payment-plugins"}}');var d=n(4848),i=n(8453);const t={sidebar_position:1,title:"Version 1.x"},c="NETOPIA Payments API - Version 1.x",l={},h=[{value:"Overview",id:"overview",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Feedback",id:"feedback",level:3},{value:"Architecture",id:"architecture",level:2},{value:"Client-Server Model",id:"client-server-model",level:3},{value:"Security Measures",id:"security-measures",level:2},{value:"Payment Request Workflow",id:"payment-request-workflow",level:2},{value:"Service Endpoints",id:"service-endpoints",level:2},{value:"Payment Request Structure",id:"payment-request-structure",level:2},{value:"XML Format",id:"xml-format",level:3},{value:"Request Parameters",id:"request-parameters",level:3},{value:"Payment Response Structure",id:"payment-response-structure",level:2},{value:"XML Format",id:"xml-format-1",level:3},{value:"Response Parameters",id:"response-parameters",level:3},{value:"Merchant&#39;s Response",id:"merchants-response",level:3},{value:"XML Response Format",id:"xml-response-format",level:4},{value:"Response Attributes",id:"response-attributes",level:3},{value:"Error Codes",id:"error-codes",level:3}];function o(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.header,{children:(0,d.jsx)(r.h1,{id:"netopia-payments-api---version-1x",children:"NETOPIA Payments API - Version 1.x"})}),"\n",(0,d.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,d.jsx)(r.admonition,{title:"[This API Version Will Be Phased Out]",type:"warning",children:(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.a,{href:"/docs/payment-api/v2.x/introduction",children:"Version 2.x"})," is the latest release of the NETOPIA Payments API and is recommended for both new and existing customers. This version uses JSON endpoints and is secured with API tokens. Version 1.x will be fully phased out by the end of 2025. This documentation is provided to assist existing customers until they complete their migration."]})}),"\n",(0,d.jsx)(r.h2,{id:"introduction",children:"Introduction"}),"\n",(0,d.jsx)(r.p,{children:"The NETOPIA Payments API provides a flexible and secure way to integrate payments into your applications. This guide covers the API structure, authentication, security measures, and request/response formats."}),"\n",(0,d.jsx)(r.h3,{id:"feedback",children:"Feedback"}),"\n",(0,d.jsxs)(r.p,{children:["Help us improve this guide by sending feedback to: ",(0,d.jsx)(r.a,{href:"mailto:implementare@netopia.ro",children:"implementare@netopia.ro"})]}),"\n",(0,d.jsx)(r.h2,{id:"architecture",children:"Architecture"}),"\n",(0,d.jsx)(r.h3,{id:"client-server-model",children:"Client-Server Model"}),"\n",(0,d.jsxs)(r.p,{children:["NETOPIA API follows a ",(0,d.jsx)(r.strong,{children:"client-server"})," model:"]}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:["The client (your website or application) sends a request using ",(0,d.jsx)(r.strong,{children:"POST"})," to one of NETOPIA's service endpoints."]}),"\n",(0,d.jsx)(r.li,{children:"The user is redirected to NETOPIA\u2019s payment page."}),"\n",(0,d.jsx)(r.li,{children:"NETOPIA processes the payment and notifies your server."}),"\n"]}),"\n",(0,d.jsx)(r.h2,{id:"security-measures",children:"Security Measures"}),"\n",(0,d.jsx)(r.p,{children:"To ensure secure transactions, the API implements:"}),"\n",(0,d.jsxs)(r.ol,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.strong,{children:"Request authentication"})," via API Signature (Signature field)."]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.strong,{children:"Data encryption"})," using RSA keys."]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.strong,{children:"Secure transport"})," via SSL/TLS (recommended for responses)."]}),"\n"]}),"\n",(0,d.jsx)(r.h2,{id:"payment-request-workflow",children:"Payment Request Workflow"}),"\n",(0,d.jsx)(r.p,{children:(0,d.jsx)(r.strong,{children:"Process Overview:"})}),"\n",(0,d.jsxs)(r.ol,{children:["\n",(0,d.jsx)(r.li,{children:"Redirect the user to NETOPIA with a payment request."}),"\n",(0,d.jsx)(r.li,{children:"NETOPIA processes the transaction and notifies your server."}),"\n",(0,d.jsx)(r.li,{children:"Your system handles the IPN (Instant Payment Notification)."}),"\n"]}),"\n",(0,d.jsx)(r.p,{children:(0,d.jsx)(r.strong,{children:"Key Parameters:"})}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"env_key"})," \u2013 Public key for encryption."]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"data"})," \u2013 XML-structured payment details, signed with NETOPIA\u2019s public certificate."]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"cipher"})," \u2013 Encryption algorithm."]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"iv"})," \u2013 Initialization vector for encryption security."]}),"\n"]}),"\n",(0,d.jsx)(r.h2,{id:"service-endpoints",children:"Service Endpoints"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Payment Mode"}),(0,d.jsx)(r.th,{children:"Standard Payment"}),(0,d.jsx)(r.th,{children:"One-Click Payment"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:"Live"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.a,{href:"https://secure.mobilpay.ro",children:"https://secure.mobilpay.ro"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.a,{href:"https://secure.mobilpay.ro/card4",children:"https://secure.mobilpay.ro/card4"})})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:"Test"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.a,{href:"https://sandboxsecure.mobilpay.ro",children:"https://sandboxsecure.mobilpay.ro"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.a,{href:"http://sandboxsecure.mobilpay.ro/card4",children:"https://sandboxsecure.mobilpay.ro/card4"})})]})]})]}),"\n",(0,d.jsxs)(r.p,{children:["For language-specific interfaces, append the language code (e.g., ",(0,d.jsx)(r.code,{children:"/en"})," for English)."]}),"\n",(0,d.jsx)(r.h2,{id:"payment-request-structure",children:"Payment Request Structure"}),"\n",(0,d.jsx)(r.h3,{id:"xml-format",children:"XML Format"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\n<order type="card" id="ORDER_ID" timestamp="YYYYMMDDHHMMSS">\n    <signature>XXXX-XXXX-XXXX-XXXX</signature>\n    <invoice currency="RON" amount="XX.YY">\n        <details>Payment Description</details>\n        <contact_info>\n            <billing type="company|person">\n                <first_name>John</first_name>\n                <last_name>Doe</last_name>\n                <email>john.doe@example.com</email>\n                <mobile_phone>+40712345678</mobile_phone>\n                <address>123 Main St, Bucharest</address>\n            </billing>\n        </contact_info>\n    </invoice>\n    <ipn_cipher>aes-256-cbc</ipn_cipher>\n    <params>\n        <param>\n            <name>custom_param</name>\n            <value>value123</value>\n        </param>\n    </params>\n    <url>\n        <confirm>https://yourdomain.com/confirm</confirm>\n        <return>https://yourdomain.com/return</return>\n    </url>\n</order>\n'})}),"\n",(0,d.jsx)(r.hr,{}),"\n",(0,d.jsx)(r.h3,{id:"request-parameters",children:"Request Parameters"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Parameter"}),(0,d.jsx)(r.th,{children:"Description"}),(0,d.jsx)(r.th,{children:"Format / Constraints"}),(0,d.jsx)(r.th,{children:"Notes"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"order type"})})}),(0,d.jsx)(r.td,{children:"Specifies the type of transaction to be initiated."}),(0,d.jsxs)(r.td,{children:["Accepted value: ",(0,d.jsx)(r.code,{children:"card"})]}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"order id"})})}),(0,d.jsx)(r.td,{children:"Internal identifier for your order."}),(0,d.jsx)(r.td,{children:"Max 64 characters, unique per seller account."}),(0,d.jsx)(r.td,{children:"Refresh on each request unless duplicate is intended."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"timestamp"})})}),(0,d.jsx)(r.td,{children:"The timestamp from your server."}),(0,d.jsxs)(r.td,{children:["Format: ",(0,d.jsx)(r.code,{children:"YYYYMMDDhhmmss"})]}),(0,d.jsxs)(r.td,{children:["Example: ",(0,d.jsx)(r.code,{children:"20240425020304"})," (April 25, 2024, 02:03:04)"]})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"signature"})})}),(0,d.jsx)(r.td,{children:"The unique key for your seller account."}),(0,d.jsxs)(r.td,{children:["Format: ",(0,d.jsx)(r.code,{children:"XXXX-XXXX-XXXX-XXXX"})]}),(0,d.jsx)(r.td,{children:"Obtainable from NETOPIA's merchant console."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"invoice"})})}),(0,d.jsx)(r.td,{children:"Contains the payment details to be initiated."}),(0,d.jsx)(r.td,{children:"-"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"currency"})})}),(0,d.jsx)(r.td,{children:"Currency for processing the payment."}),(0,d.jsxs)(r.td,{children:["ISO Code (e.g., ",(0,d.jsx)(r.code,{children:"RON"}),")"]}),(0,d.jsxs)(r.td,{children:["Other currencies (EUR, USD, GBP) may be used if authorized; otherwise, converted to ",(0,d.jsx)(r.code,{children:"RON"})," with dual display."]})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"amount"})})}),(0,d.jsx)(r.td,{children:"The amount to be processed."}),(0,d.jsxs)(r.td,{children:["Max: ",(0,d.jsx)(r.code,{children:"99999"})," units"]}),(0,d.jsxs)(r.td,{children:["Card checks may use an amount of ",(0,d.jsx)(r.code,{children:"0"}),"."]})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsxs)(r.td,{children:[(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"installments"})})," ",(0,d.jsx)(r.em,{children:"(optional)"})]}),(0,d.jsx)(r.td,{children:"Number of installments available."}),(0,d.jsx)(r.td,{children:"Type: Integer"}),(0,d.jsx)(r.td,{children:"Must be preconfigured by a NETOPIA representative."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsxs)(r.td,{children:[(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"selected_installments"})})," ",(0,d.jsx)(r.em,{children:"(optional)"})]}),(0,d.jsx)(r.td,{children:"The number of installments selected by the client."}),(0,d.jsx)(r.td,{children:"Type: Integer"}),(0,d.jsxs)(r.td,{children:["Must be within the ",(0,d.jsx)(r.code,{children:"installments"})," range."]})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"customer_id"})})}),(0,d.jsx)(r.td,{children:"Internal identifier of your customer."}),(0,d.jsx)(r.td,{children:"Unique ID"}),(0,d.jsx)(r.td,{children:"Useful for one-click payments."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"token_id"})})}),(0,d.jsx)(r.td,{children:"Token received from an initial payment request."}),(0,d.jsx)(r.td,{children:"-"}),(0,d.jsx)(r.td,{children:"Identifies the customer and payment instrument."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"pan_masked"})})}),(0,d.jsx)(r.td,{children:"First 6 and last 4 digits of the associated credit card."}),(0,d.jsx)(r.td,{children:"Masked Card Number"}),(0,d.jsx)(r.td,{children:"Displays a user-friendly version of the card."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"details"})})}),(0,d.jsx)(r.td,{children:"Payment details as displayed on the NETOPIA secure payment page."}),(0,d.jsx)(r.td,{children:"Alphanumeric"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"cipher"})})}),(0,d.jsx)(r.td,{children:"Algorithm/method for data encryption or decryption."}),(0,d.jsxs)(r.td,{children:["Options: ",(0,d.jsx)(r.code,{children:"rc4"}),", ",(0,d.jsx)(r.code,{children:"aes-256-cbc"})]}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"contact_info"})})}),(0,d.jsx)(r.td,{children:"Payer information for a smoother payment experience."}),(0,d.jsx)(r.td,{children:"-"}),(0,d.jsx)(r.td,{children:"Eliminates the need for a secondary step to collect customer details."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"billing_type"})})}),(0,d.jsx)(r.td,{children:"Customer type."}),(0,d.jsxs)(r.td,{children:["Values: ",(0,d.jsx)(r.code,{children:"person"}),", ",(0,d.jsx)(r.code,{children:"company"})]}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"first_name"})})}),(0,d.jsx)(r.td,{children:"Customer's first name."}),(0,d.jsx)(r.td,{children:"String"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"last_name"})})}),(0,d.jsx)(r.td,{children:"Customer's last name."}),(0,d.jsx)(r.td,{children:"String"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"email"})})}),(0,d.jsx)(r.td,{children:"Customer's email address."}),(0,d.jsx)(r.td,{children:"Valid email format"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"mobile_phone"})})}),(0,d.jsx)(r.td,{children:"Customer's phone number."}),(0,d.jsx)(r.td,{children:"Numeric"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"address"})})}),(0,d.jsx)(r.td,{children:"Customer's address."}),(0,d.jsx)(r.td,{children:"String"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"params"})})}),(0,d.jsx)(r.td,{children:"An array of custom parameters."}),(0,d.jsx)(r.td,{children:"-"}),(0,d.jsx)(r.td,{children:"Provides additional details about the payer and/or"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"url"})})}),(0,d.jsx)(r.td,{children:"The URL where NETOPIA sends the payment result."}),(0,d.jsx)(r.td,{children:"Valid URL"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"confirm"})})}),(0,d.jsx)(r.td,{children:"Your web application's URL called on payment status changes or manual IPNs."}),(0,d.jsx)(r.td,{children:"Must be publicly accessible"}),(0,d.jsx)(r.td,{children:"Must support HTTP (port 80) or HTTPS (port 443). First call is synchronous; subsequent calls are asynchronous."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"return"})})}),(0,d.jsx)(r.td,{children:"URL to which the client is redirected after payment completion."}),(0,d.jsx)(r.td,{children:"Valid URL"}),(0,d.jsxs)(r.td,{children:["Not to be confused with success or cancel URLs. Content is dynamic based on data sent to the ",(0,d.jsx)(r.code,{children:"confirm"})," URL."]})]})]})]}),"\n",(0,d.jsx)(r.hr,{}),"\n",(0,d.jsx)(r.h2,{id:"payment-response-structure",children:"Payment Response Structure"}),"\n",(0,d.jsxs)(r.p,{children:["Upon every change in the status of a payment, NETOPIA will make a ",(0,d.jsx)(r.code,{children:"POST"})," request to the URL set as the confirmation endpoint, with the ",(0,d.jsx)(r.code,{children:"Content-Type: application/x-www-form-urlencoded"}),". The request will contain the following parameters: ",(0,d.jsx)(r.code,{children:"env_key"}),", ",(0,d.jsx)(r.code,{children:"data"}),", ",(0,d.jsx)(r.code,{children:"cipher"}),", and optionally, ",(0,d.jsx)(r.code,{children:"iv"}),". The response XML will be encrypted using an X509 public certificate, and you must decrypt it using the private key provided by NETOPIA (or your own)."]}),"\n",(0,d.jsxs)(r.p,{children:["You will receive all the parameters you initially sent, unchanged, along with an additional element, called ",(0,d.jsx)(r.strong,{children:"mobilpay"}),", in the response XML."]}),"\n",(0,d.jsx)(r.h3,{id:"xml-format-1",children:"XML Format"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\n<order type="card" id="ORDER_ID" timestamp="YYYYMMDDHHMMSS">\n    <mobilpay timestamp="YYYYMMDDHHMMSS" crc="XXXXX">\n        <action>action_type</action>\n        <customer type="person|company">\n            <first_name>John</first_name>\n            <last_name>Doe</last_name>\n            <address>123 Main St, Bucharest</address>\n            <email>john.doe@example.com</email>\n            <mobile_phone>+40712345678</mobile_phone>\n        </customer>\n        <purchase>mobilPay_purchase_no</purchase>\n        <original_amount>XX.XX</original_amount>\n        <processed_amount>NN.NN</processed_amount>\n        <pan_masked>XXXXXX****YYYY</pan_masked>\n        <payment_instrument_id>ZZZZZZZ</payment_instrument_id>\n        <token_id>token_identifier</token_id>\n        <token_expiration_date>YYYY-MM-DD HH:MM:SS</token_expiration_date>\n        <error code="N">error_message</error>\n    </mobilpay>\n</order>\n'})}),"\n",(0,d.jsx)(r.hr,{}),"\n",(0,d.jsx)(r.h3,{id:"response-parameters",children:"Response Parameters"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Parameter"}),(0,d.jsx)(r.th,{children:"Description"}),(0,d.jsx)(r.th,{children:"Format / Constraints"}),(0,d.jsx)(r.th,{children:"Notes"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"mobilpay"})})}),(0,d.jsx)(r.td,{children:"NETOPIA's response, appended to your unchanged request."}),(0,d.jsx)(r.td,{children:"-"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"timestamp"})})}),(0,d.jsx)(r.td,{children:"NETOPIA's internal timestamp."}),(0,d.jsxs)(r.td,{children:["Format: ",(0,d.jsx)(r.code,{children:"YYYYMMDDHHMMSS"})]}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"crc"})})}),(0,d.jsx)(r.td,{children:"NETOPIA internal identifier check."}),(0,d.jsx)(r.td,{children:"Alphanumeric"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"action"})})}),(0,d.jsx)(r.td,{children:"The action attempted by NETOPIA."}),(0,d.jsxs)(r.td,{children:["Values: ",(0,d.jsx)(r.code,{children:"paid_pending"}),", ",(0,d.jsx)(r.code,{children:"confirmed_pending"}),", ",(0,d.jsx)(r.code,{children:"paid"}),", ",(0,d.jsx)(r.code,{children:"confirmed"}),", ",(0,d.jsx)(r.code,{children:"credit"}),", ",(0,d.jsx)(r.code,{children:"canceled"})]}),(0,d.jsx)(r.td,{children:"This is not the transaction status, as all actions can succeed or fail."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"customer type"})})}),(0,d.jsx)(r.td,{children:"The type of paying customer."}),(0,d.jsxs)(r.td,{children:["Values: ",(0,d.jsx)(r.code,{children:"person"}),", ",(0,d.jsx)(r.code,{children:"company"})]}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"first_name"})})}),(0,d.jsx)(r.td,{children:"The customer's first name."}),(0,d.jsx)(r.td,{children:"String"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"last_name"})})}),(0,d.jsx)(r.td,{children:"The customer's last name."}),(0,d.jsx)(r.td,{children:"String"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"address"})})}),(0,d.jsx)(r.td,{children:"The customer's address."}),(0,d.jsx)(r.td,{children:"String"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"email"})})}),(0,d.jsx)(r.td,{children:"The customer's email address."}),(0,d.jsx)(r.td,{children:"Valid email format"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"mobile_phone"})})}),(0,d.jsx)(r.td,{children:"The customer's phone number."}),(0,d.jsx)(r.td,{children:"Numeric"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"purchase"})})}),(0,d.jsx)(r.td,{children:"NETOPIA internal identifier."}),(0,d.jsx)(r.td,{children:"Unique ID"}),(0,d.jsx)(r.td,{children:"Unique for the entire NETOPIA platform."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"original_amount"})})}),(0,d.jsx)(r.td,{children:"The original amount processed."}),(0,d.jsx)(r.td,{children:"Decimal"}),(0,d.jsx)(r.td,{children:"-"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"processed_amount"})})}),(0,d.jsx)(r.td,{children:"The processed amount at the moment of response."}),(0,d.jsx)(r.td,{children:"Decimal"}),(0,d.jsx)(r.td,{children:"Can be lower than the original amount in case of partial capture or refund."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"pan_masked"})})}),(0,d.jsx)(r.td,{children:"First 6 and last 4 digits of the card used."}),(0,d.jsx)(r.td,{children:"Masked Card Number"}),(0,d.jsx)(r.td,{children:"Store and use for customer-friendly payment instrument identification."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"payment_instrument_id"})})}),(0,d.jsx)(r.td,{children:"Internal NETOPIA identifier of the payment instrument."}),(0,d.jsx)(r.td,{children:"Alphanumeric"}),(0,d.jsx)(r.td,{children:"Helps check uniqueness."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"token_id"})})}),(0,d.jsx)(r.td,{children:"Token associated with the payment instrument."}),(0,d.jsx)(r.td,{children:"Alphanumeric"}),(0,d.jsx)(r.td,{children:"Used for recurring payments or one-click payments."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"token_expiration_date"})})}),(0,d.jsx)(r.td,{children:"Expiration date of the token."}),(0,d.jsxs)(r.td,{children:["Format: ",(0,d.jsx)(r.code,{children:"YYYY-MM-DD HH:MM:SS"})]}),(0,d.jsx)(r.td,{children:"Usually the expiration date of the card."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"error code"})})}),(0,d.jsx)(r.td,{children:"Indicates whether the action was successful."}),(0,d.jsx)(r.td,{children:"0 (Success) or other numeric values"}),(0,d.jsxs)(r.td,{children:["A value of ",(0,d.jsx)(r.code,{children:"0"})," means success, any other value indicates failure."]})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"error message"})})}),(0,d.jsx)(r.td,{children:"Descriptive error message."}),(0,d.jsx)(r.td,{children:"String"}),(0,d.jsx)(r.td,{children:"Can be displayed to the user for better understanding."})]})]})]}),"\n",(0,d.jsx)(r.hr,{}),"\n",(0,d.jsx)(r.h3,{id:"merchants-response",children:"Merchant's Response"}),"\n",(0,d.jsx)(r.p,{children:"For each call to your confirmation URL, you must send a response in XML format back to NETOPIA, indicating whether you have successfully recorded the response. This response is crucial for NETOPIA to determine whether to retry sending the IPN."}),"\n",(0,d.jsxs)(r.p,{children:["If you encounter an error, you should specify an error code and message. You can check your response in the ",(0,d.jsx)(r.a,{href:"https://admin.netopia-payments.com/",children:"NETOPIA Platform"})," under ",(0,d.jsx)(r.code,{children:"Orders > Card"}),", selecting ",(0,d.jsx)(r.code,{children:"Any"})," status and identifying the transaction."]}),"\n",(0,d.jsx)(r.h4,{id:"xml-response-format",children:"XML Response Format"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\n<crc error_type="1|2" error_code="numeric">message</crc>\n'})}),"\n",(0,d.jsx)(r.hr,{}),"\n",(0,d.jsx)(r.h3,{id:"response-attributes",children:"Response Attributes"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Attribute"}),(0,d.jsx)(r.th,{children:"Description"}),(0,d.jsx)(r.th,{children:"Format / Constraints"}),(0,d.jsx)(r.th,{children:"Notes"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"error_type"})})}),(0,d.jsx)(r.td,{children:"Determines if NETOPIA will retry sending the IPN."}),(0,d.jsxs)(r.td,{children:[(0,d.jsx)(r.code,{children:"1"})," (Temporary Error), ",(0,d.jsx)(r.code,{children:"2"})," (Permanent Error)"]}),(0,d.jsxs)(r.td,{children:["Set to ",(0,d.jsx)(r.code,{children:"1"})," for temporary issues, ",(0,d.jsx)(r.code,{children:"2"})," for permanent failures."]})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"error_code"})})}),(0,d.jsx)(r.td,{children:"Your internal error code."}),(0,d.jsx)(r.td,{children:"Numeric"}),(0,d.jsx)(r.td,{children:"Helps diagnose issues on your system."})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.strong,{children:(0,d.jsx)(r.code,{children:"message"})})}),(0,d.jsx)(r.td,{children:"Your error message."}),(0,d.jsx)(r.td,{children:"String"}),(0,d.jsxs)(r.td,{children:["If no error, return the received ",(0,d.jsx)(r.code,{children:"crc"})," value or an appropriate success message."]})]})]})]}),"\n",(0,d.jsx)(r.p,{children:"This structured response ensures smooth communication with NETOPIA and prevents unnecessary retries of failed IPNs."}),"\n",(0,d.jsx)(r.hr,{}),"\n",(0,d.jsx)(r.h3,{id:"error-codes",children:"Error Codes"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Code"}),(0,d.jsx)(r.th,{children:"Meaning"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"0"})}),(0,d.jsx)(r.td,{children:"Approved"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"16"})}),(0,d.jsx)(r.td,{children:"Stolen card"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"17"})}),(0,d.jsx)(r.td,{children:"Incorrect card number"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"18"})}),(0,d.jsx)(r.td,{children:"Closed card"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"19"})}),(0,d.jsx)(r.td,{children:"Expired card"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"20"})}),(0,d.jsx)(r.td,{children:"Insufficient funds"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"21"})}),(0,d.jsx)(r.td,{children:"CVV2 incorrect"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"22"})}),(0,d.jsx)(r.td,{children:"Issuer unavailable"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"32"})}),(0,d.jsx)(r.td,{children:"Incorrect amount"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"33"})}),(0,d.jsx)(r.td,{children:"Incorrect currency"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"34"})}),(0,d.jsx)(r.td,{children:"Transaction not permitted"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"35"})}),(0,d.jsx)(r.td,{children:"Transaction declined"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"36"})}),(0,d.jsx)(r.td,{children:"Rejected by antifraud"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"37"})}),(0,d.jsx)(r.td,{children:"Declined (legal restrictions)"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"38"})}),(0,d.jsx)(r.td,{children:"Requires 3D Authentication"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"48"})}),(0,d.jsx)(r.td,{children:"Invalid request"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"49"})}),(0,d.jsx)(r.td,{children:"Duplicate PREAUTH"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"50"})}),(0,d.jsx)(r.td,{children:"Duplicate AUTH"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"51"})}),(0,d.jsx)(r.td,{children:"Can only CANCEL preauth"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"52"})}),(0,d.jsx)(r.td,{children:"Can only CONFIRM preauth"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"53"})}),(0,d.jsx)(r.td,{children:"Can only CREDIT confirmed order"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"54"})}),(0,d.jsx)(r.td,{children:"Credit amount exceeds auth amount"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"55"})}),(0,d.jsx)(r.td,{children:"Capture amount exceeds preauth"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"56"})}),(0,d.jsx)(r.td,{children:"Duplicate request"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"99"})}),(0,d.jsx)(r.td,{children:"Generic error"})]})]})]})]})}function a(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,d.jsx)(r,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>c});var s=n(6540);const d={},i=s.createContext(d);function t(e){const r=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),s.createElement(i.Provider,{value:r},e.children)}}}]);